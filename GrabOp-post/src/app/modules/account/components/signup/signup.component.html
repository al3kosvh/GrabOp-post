<div class="signup" fxLayout="column">
    <div *ngIf="!user.id">
        <div fxLayout="row" fxLayoutAlign="center">
            <h3>Join Us</h3>
        </div>

        <form class="join-form" #joinForm="ngForm" autocomplete="off" [formGroup]="formGroupJoin" (ngSubmit)="join()">
            <mat-form-field>
                <input matInput placeholder="First Name" name="firstName" formControlName="firstName" />
            </mat-form-field>
            <mat-form-field>
                <input matInput placeholder="Last Name" name="lastName" formControlName="lastName" />
            </mat-form-field>

            <div>
                <mat-form-field>
                    <input matInput placeholder="User Name" name="username" formControlName="username" />
                </mat-form-field>
                <img *ngIf="formGroupJoin.get('username').status === 'PENDING'" src="data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="
                />
                <div *ngIf="formGroupJoin.get('username').errors?.usernameTaken">
                    {{ messages.usernameTakenMessage }}
                </div>
                <div *ngIf="formGroupJoin.get('username').errors?.connectionError">
                    {{ messages.connectionErrorMessage }}
                </div>
            </div>

            <div>
                <mat-form-field>
                    <input matInput placeholder="Email" name="primaryEmail" formControlName="primaryEmail" />
                </mat-form-field>
                <img *ngIf="formGroupJoin.get('primaryEmail').status === 'PENDING'" src="data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="
                />
                <div *ngIf="formGroupJoin.get('primaryEmail').errors?.emailTaken">
                    {{ messages.emailTakenMessage }}
                </div>
                <div *ngIf="formGroupJoin.get('primaryEmail').errors?.connectionError">
                    {{ messages.connectionErrorMessage }}
                </div>
            </div>

            <div>
                <mat-form-field>
                    <input matInput type="password" placeholder="Password" name="password" formControlName="password" />
                </mat-form-field>
                <mat-form-field>
                    <input matInput type="password" placeholder="Confirm Password" name="confirmPassword" formControlName="confirmPassword" />
                </mat-form-field>
                <div *ngIf="formGroupJoin.get('confirmPassword').errors?.matchPassword">
                    {{ messages.passwordMismatchMessage }}
                </div>
            </div>

            <div class="signup-align-end">
                <button [disabled]="!joinForm.valid" type="submit" mat-raised-button color="primary">Join</button>
                <img *ngIf="submitting" src="data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="
                />
            </div>
        </form>
    </div>


    <div *ngIf="user.id">
        <div fxLayout="row" fxLayoutAlign="center">
            <h3>Join Us (Continuation)</h3>
        </div>
        <form #f="ngForm" autocomplete="off" [formGroup]="formGroupContinuation" (ngSubmit)="joinContinuation()">

            <div class="message" *ngIf="messages.submitMessage">{{ messages.submitMessage }}</div>

            <mat-horizontal-stepper formArrayName="formArray" linear>

                <mat-step formGroupName="0" [stepControl]="formArray?.get([0])">
                    <mat-form-field>
                        <input matInput [(ngModel)]="user.jobtitle" placeholder="Job Title" name="jobtitle" formControlName="jobTitle" />
                    </mat-form-field>

                    <mat-radio-group [(ngModel)]="user.occupation" name="occupation" formControlName="occupation" (change)="changeOccupation($event.value)">

                        <mat-radio-button value="2">
                            Company
                        </mat-radio-button>
                        <mat-form-field *ngIf="user.occupation == 2">
                            <input matInput [(ngModel)]="user.company" [required]="user.occupation == 2" placeholder="Company" name="company" formControlName="company"
                            />
                        </mat-form-field>

                        <mat-radio-button value="1">
                            Self Employed
                        </mat-radio-button>

                        <mat-radio-button value="3">
                            Seeking an Opportunity
                        </mat-radio-button>

                        <mat-radio-button value="4">
                            Other
                        </mat-radio-button>

                    </mat-radio-group>

                    <div fxLayout="row" fxLayoutAlign="end">
                        <button mat-raised-button color="primary" type="button" matStepperNext>Next</button>
                    </div>
                </mat-step>

                <mat-step formGroupName="1" [stepControl]="formArray?.get([1])">
                    <mat-form-field>
                        <input matInput [(ngModel)]="user.phone" placeholder="Phone Number" name="phone" type="tel" formControlName="phoneNumber"
                        />
                    </mat-form-field>

                    <mat-form-field>
                        <input matInput [(ngModel)]="user.country" placeholder="Country" name="country" formControlName="country" />
                    </mat-form-field>

                    <mat-form-field>
                        <input matInput [(ngModel)]="user.province" placeholder="Province" name="province" formControlName="province" />
                    </mat-form-field>

                    <mat-form-field>
                        <input matInput [(ngModel)]="user.city" placeholder="City" name="city" formControlName="city" />
                    </mat-form-field>

                    <div fxLayout="row" fxLayoutAlign="end">
                        <button mat-button type="button" matStepperPrevious>Back</button>
                        <button mat-raised-button color="primary" type="button" matStepperNext>Next</button>
                    </div>
                </mat-step>

                <mat-step>
                    <ng-template matStepLabel>GO</ng-template>

                    <div class="tab-content">
                        <div class="container-file" fxLayout="row">
                            <div class="document-view" fxLayout="column">
                                <img class="image" [src]="user.profileImage">
                            </div>
                            <div fxLayout="column">
                                <a mat-raised-button color="accent" class="btn-file">
                                    <input type="file" accept="image/gif, image/jpeg, image/png" (change)="uploadFile($event)" />
                                    add photo
                                  </a>
                            </div>
                        </div>

                        <div class="container-file" fxLayout="row">
                            <div class="document-view" fxLayout="column">
                                <img class="image" [src]="user.video">
                            </div>
                            <div fxLayout="column">
                                <a mat-raised-button color="accent" class="btn-file">
                                    <input type="file" accept="video/*" (change)="uploadFile($event)" />
                                    add video
                                  </a>
                            </div>
                        </div>

                        <div class="container-file" fxLayout="row">
                            <div class="document-view" fxLayout="column">
                                <img [src]="user.backgroundImage">
                            </div>
                            <div fxLayout="column">
                                <a mat-raised-button color="accent" class="btn-file">
                                    <input type="file" accept="image/gif, image/jpeg, image/png" (change)="uploadFile($event)" />
                                    backfround image
                                  </a>
                            </div>
                        </div>
                    </div>

                    <div class="signup-align-end">
                        <button mat-button type="button" matStepperPrevious>Back</button>
                        <button mat-raised-button color="primary" [disabled]="!f.valid" type="submit">Sign Up</button>
                        <img *ngIf="submitting" src="data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="
                        />
                    </div>
                </mat-step>
            </mat-horizontal-stepper>
        </form>
    </div>

    <div class="signup-align-center" *ngIf="done">
        <div>
            <h4>Congratz! You are almost finished your registration</h4>

            <div>
                We have sent you an email to the following email address:
            </div>
            <div><strong>{{ user.primaryEmail }}</strong></div>
            <div>
                Please click on the link in that email to finalize your registration
            </div>
        </div>


        <form #changeEmailForm="ngForm" autocomplete="off" [formGroup]="formGroupNewEmail">
            <div>
                <mat-form-field>
                    <input matInput [(ngModel)]="newEmail" placeholder="Enter new email address" name="newEmail" formControlName="newEmail" />
                </mat-form-field>
                <img *ngIf="formGroupNewEmail.get('newEmail').status === 'PENDING'" src="data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="
                />
                <div *ngIf="formGroupNewEmail.get('newEmail').errors?.emailTaken">
                    {{ messages.emailTakenMessage }}
                </div>
                <div *ngIf="formGroupNewEmail.get('newEmail').errors?.connectionError">
                    {{ messages.connectionErrorMessage }}
                </div>
            </div>
            <div>
                <button mat-raised-button color="primary" type="button">click here to resend email</button>
                <img *ngIf="submitting" src="data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="
                />
            </div>
        </form>
    </div>
</div>