<div fxLayout="column">
    <div fxLayout="row-reverse">
        <button class="close" md-icon-button (click)="onClose()"><md-icon>close</md-icon></button>
    </div>
    <h3>Sign Up</h3>
    <div *ngIf="errorMessage">{{ errorMessage }}</div>
    <form #f="ngForm" autocomplete="off">
        <md-horizontal-stepper>
            <md-step>
                <md-form-field>
                    <input mdInput [(ngModel)]="user.firstName" placeholder="First Name" name="firstName" required minlength="2" />
                </md-form-field>

                <md-form-field>
                    <input mdInput [(ngModel)]="user.lastName" placeholder="Last Name" name="lastName" required minlength="2" />
                </md-form-field>

                <md-form-field>
                    <input mdInput [(ngModel)]="user.username" placeholder="User Name" name="username" required minlength="2" />
                    <div *ngIf="usernameMsg">{{usernameMsg}}</div>
                </md-form-field>

                <div>
                    <md-form-field>
                        <input mdInput [(ngModel)]="user.primaryEmail" (change)="checkEmail($event.value)" placeholder="Email" name="email" type="email"
                            appCheckEmail required minlength="6" maxlength="100" />
                    </md-form-field>
                    <img *ngIf="checkingEmail" src="data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="
                    />
                    <div *ngIf="emailMessage">{{emailMessage}}</div>
                    <!--div *ngIf="restoreUsername"><a [routerLink]="['/restore-username']">Restore Username</a> </div-->
                </div>

                <div>
                    <md-form-field>
                        <input mdInput type="password" [(ngModel)]="user.password" placeholder="Password" name="password" required minlength="6"
                            #password="ngModel" />
                    </md-form-field>
                    <md-form-field>
                        <input mdInput type="password" [(ngModel)]="user.confirmPassword" appEqualValidate="password" placeholder="Confirm Password"
                            name="confirm" required minlength="6" #confirmPassword="ngModel" />
                    </md-form-field>
                    <div [hidden]="confirmPassword.valid || confirmPassword.pristine">
                        Password mismatch
                    </div>
                </div>

                <div>
                    <button type="button" md-raised-button color="primary" mdStepperNext>Next</button>
                </div>
            </md-step>

            <md-step>
                <md-form-field>
                    <input mdInput [(ngModel)]="user.jobTitle" placeholder="Job Title" name="jobtitle" required/>
                </md-form-field>

                <md-radio-group [(ngModel)]="user.occupation" #occupation="ngModel" required name="occupation">

                    <md-radio-button value="1">
                        Company
                    </md-radio-button>
                    <md-form-field *ngIf="occupation.value == 1">
                        <input mdInput [(ngModel)]="user.companyName" placeholder="Company" name="companyName" required/>
                    </md-form-field>

                    <md-radio-button value="2">
                        Self Employed
                    </md-radio-button>

                    <md-radio-button value="3">
                        Seeking an Opportunity
                    </md-radio-button>

                    <md-radio-button value="4">
                        Other
                    </md-radio-button>
                    <md-form-field *ngIf="occupation.value == 4">
                        <input mdInput [(ngModel)]="user.customOccupation" placeholder="Other" name="customOccupation" required/>
                    </md-form-field>

                </md-radio-group>

                <div>
                    <button md-button type="button" mdStepperPrevious>Back</button>
                    <button md-raised-button color="primary" type="button" mdStepperNext>Next</button>
                </div>
            </md-step>

            <md-step>
                <md-form-field>
                    <input mdInput [(ngModel)]="user.phoneNumber" placeholder="Phone Number" name="phone" required type="tel" />
                </md-form-field>

                <md-checkbox>Make Visible</md-checkbox>

                <md-form-field>
                    <input mdInput [(ngModel)]="user.country" placeholder="Country" name="country" required />
                </md-form-field>

                <md-form-field>
                    <input mdInput [(ngModel)]="user.province" placeholder="Province" name="province" required />
                </md-form-field>

                <md-form-field>
                    <input mdInput [(ngModel)]="user.city" placeholder="City" name="city" required />
                </md-form-field>

                <div>
                    <button md-button type="button" mdStepperPrevious>Back</button>
                    <button md-raised-button color="primary" type="button" mdStepperNext>Next</button>
                </div>
            </md-step>

            <md-step label="GO">
                You are now done.
                <div>
                    <button md-button type="button" mdStepperPrevious>Back</button>
                    <button md-raised-button color="primary" type="submit" mdStepperPrevious>Sign Up</button>
                    <img *ngIf="loading" src="data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA=="
                    />
                </div>
            </md-step>
        </md-horizontal-stepper>
    </form>
</div>
